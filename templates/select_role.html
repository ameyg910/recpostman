<!DOCTYPE html>
<html>
<head>
    <title>Select Role</title>
    <script>
        function confirmRole() {
            const role = document.querySelector('input[name="role"]:checked').value;
            const confirmed = confirm("Are you sure you want to select the " + role + " role? This choice cannot be changed later.");
            return confirmed;
        }
    </script>
</head>
<body>
    <h1>Select Your Role</h1>
    <form method="POST" action="/select-role" onsubmit="return confirmRole()">
        <input type="hidden" name="id" value="{{.UserID}}">
        {{if ne .Email "ameygupta880@gmail.com"}}
            <label><input type="radio" name="role" value="recruiter" required> Recruiter</label><br>
            <label><input type="radio" name="role" value="applicant" required> Applicant</label><br>
            <div id="extra-fields">
                <label id="company_title_label" style="display:none;">Company Title: <input type="text" name="company_title"></label><br>
                <label id="company_description_label" style="display:none;">Company Description: <textarea name="company_description"></textarea></label><br>
                <label id="company_logo_label" style="display:none;">Company Logo URL: <input type="text" name="company_logo"></label><br>
                <label id="skills_label" style="display:none;">Skills (comma-separated): <input type="text" name="skills"></label><br>
            </div>
            <button type="submit">Submit</button>
        {{else}}
            <p>Your account ({{.Email}}) is assigned as Super Admin. No further action is required.</p>
            <a href="/dashboard">Go to Dashboard</a>
        {{end}}
    </form>

    <script>
        document.querySelectorAll('input[name="role"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('company_title_label').style.display = this.value === 'recruiter' ? 'block' : 'none';
                document.getElementById('company_description_label').style.display = this.value === 'recruiter' ? 'block' : 'none';
                document.getElementById('company_logo_label').style.display = this.value === 'recruiter' ? 'block' : 'none';
                document.getElementById('skills_label').style.display = this.value === 'applicant' ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>